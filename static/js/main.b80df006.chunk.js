(this["webpackJsonp@bopen/leaflet-area-selection-example"]=this["webpackJsonp@bopen/leaflet-area-selection-example"]||[]).push([[0],[,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAnCAYAAAB9qAq4AAAEX0lEQVR4AcWYBWzrVhSGF/vG5fYxM7+XFG3HkKa+LrdjZmZmZmYUDIUTjDexJhwzi6WhaCDeEw29/3S2dBRZkWtbyZE+HYeu/wP2PfEBOVghhJsCWm9cmOHKsu7Iw3R9so9eb9mypR1OYwig1gfD19J1vUhIKUU2WSxLRx99tApxr5hVP3DkTAD/YsLfq6HoYqlU0uLXz2AUKXnD9qu2Nx1A5N8QB8aDvmUrnsJH1yiKch78kcAD+8Ba0Bm33m233abojneH4fpPGFV/dxR8eoVYkByV1KzKD+2xyaBSmwhG7LG78LatqtqJ8OeAq8Gt4B7wQMjd4XtXIojz4Q/C716yvamAMBz5fdQqmSzqlc7uvvNKQ9YFztjkcMK+7QFrNU2jrFa0zs5DIfBPCpKqYI9NBabrmVn1LZRYCDENdyJLLWVWDREMtVFfGaOTUnflVygzZfDRXC6QsKeuivqFN3uCLCosiHZAtqFv6YoH6r6XyS4Ha9hVmdZE6Cvg9IUjBJuptLAjgKx7L9uaqnoQWmYyEp0l0j3gzLx2DbbuibR22nULrJRU2s68BLK1zwBLs0Z5GjByKi0PUAuromTpO5sEcsE5mMruCKdEGU2zQC+4ob4sOfbfADg8ymqaElwBSlx0Lhbu6W1tXbOivX1iMQJ5dDOLLS3duGmgIJ8geLLDwLbEAtmXVoI7EpeW7dFcLN89iB07drTRZ47jdBij/inlYeu9/mHHSzrFFJjAW8DuRWRPiU5sunIIWYwdr9ig+wlNMBYmIRz/azq+FwWZ5Ko9CpyaSByLnCZrw/V+wglxUv+7IdOlyURbvnz5eipjZ2efDq+v27z9aqtGE8w4BgTvX9efDUaq8kQ2bzYs7UZwf+LScoGu/Mz1ZwL4/XTSfYPmO3j7fKG130iDLLhSCHEV/OnlIesq0/V/CQO6jc6ftPfuBXt4RpMKHHG90+kvAM11OOnvuj0+0uh3Q1IuQUnb45PBFw8bV1XVE+DOAmRamp1h++7STWXdfq5Wm1kb9RT/HwI08ryU4TEXF6uYFnwk455KdjEoNu4nnvnblIZlQSmOqlTH39w7oH/Y3d1dDm8YIqXA7cVi8SwuLpNBXBn8S1eU403T/4Lbmfg02+LBwMptoDCq/jwJg8i/yOP11/9/UtJSZvCcXMcxamDd9Z6AwN8Mx3t7/eZt1IPr2f2vsIidZws4LreJh5/csqze8LBHURQaSsf5vpxwJDsEDOY9VBRYv/GSnAEuY0EUE1y9Z4EO/mHeIgt1kXvgQbCPBQBiL45tVN5mPuESbKK5E5wY81khmkxgc6DSTIH1O8lJ4GawNG7iwA50DtyyZgusb/bdJFIIMRoJcWrjlb1lYwrHx7CeBM03fpGc0N7edbLhyjfoqRYNB0OGexvPbKtMRAf7Bo0zaJyCyP0kkmY/Vlr4VlmYoenpk7sg7hsaq8Kd6PnWlphbeN8sSdlNg6bpyEvxULP12eMWPyLlm7n/AN2O6VGFN8QJAAAAAElFTkSuQmCC"},function(t,e,n){t.exports=n.p+"static/media/B-Open.a8695c4b.svg"},function(t,e,n){t.exports=n(10)},,function(t,e,n){},function(t,e,n){},,,,function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),i=(n(4),n(5),n(1)),r=n.n(i),s={leafletAreaSelectorControl:"_37qQG",leafletMapOverlayPane:"_39tTo",endSelectionArea:"_3Xj9O",areaSelectMarker:"_1h_hk",areaSelectGhostMarker:"_1KD2U _1h_hk"};function l(t,e){void 0===e&&(e="");var n=function(t){return t.split("-").map((function(t,e){return 0===e?t:""+t[0].toUpperCase()+t.substring(1)})).join("")}(t);return s[n]?e?s[n]+" "+t+" "+e:s[n]+" "+t:e?t+" "+e:t}function c(t,e,n){void 0===n&&(n=null);var o=n?e.add(n):e;t._leaflet_pos=o,a.Browser.any3d?a.DomUtil.setTransform(t,o):(t.style.left=o.x+"px",t.style.top=o.y+"px")}var h=a.Browser.mobile?"touchstart":"click",d="area-draw-selection";function m(t,e){var n,o,i=t.getContainer().querySelector(".leaflet-map-pane"),r=function(t){var e=t.active,n=t.fadeOnActivation;return a.DomUtil.create("div",l("leaflet-map-overlay-pane","leaflet-pane"+(e?"":" inactive")+(n?" fading-enabled":"")))}(e);n=r,(o=i).parentNode.insertBefore(n,o.nextSibling);var s=t.createPane(d,r);s.addEventListener(h,(function(e){e.isTrusted&&(e.stopPropagation(),t.fire("as:point-add",e))})),s.style.zIndex=550}function g(){return(g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function p(t){var e=this;if(!this.map_moving){var n=t.index,o=void 0===n?null:n,i=t.clientX,r=t.clientY;if(void 0===i&&void 0===r){var s=t.touches[0];i=s.clientX,r=s.clientY}var m=this.getMap(),p=m.getContainer().getBoundingClientRect(),u=i-p.left,v=r-p.top;0===this.markers.length&&function(t,e){var n=e[0],o=e[1],i=t.getMap(),r=i.getPane(d),s=a.DomUtil.create("div",l("end-selection-area"),r),m=s.getBoundingClientRect();s.setAttribute("role","button"),s.addEventListener(h,(function(t){t.isTrusted&&(t.stopPropagation(),i.fire("as:creation-end"))}),{once:!0}),s.addEventListener("mouseenter",t.hoverClosePoint.bind(t)),s.addEventListener("mouseleave",t.outClosePoint.bind(t)),c(s,new a.Point(n,o),new a.Point(-m.width/2,-m.height/2))}(this,[u,v]);var f=new a.Point(u,v),k=new a.DivIcon({className:l("area-select-marker"),iconSize:[16,16]}),L=new a.Marker(m.containerPointToLatLng(f),{icon:k,draggable:!0}),y=b.bind(this);L.on("drag",y(null===o?this.markers.length:o)),L.on("dragstart",(function(t){t.target.getElement().classList.add("active")})),L.on("dragend",(function(t){t.target.getElement().classList.remove("active")}));var w,P={point:f,marker:L,index:o};if(L.on("dblclick",(w=this.markers.length,function(t){m.fire("as:marker-remove",g({},P,{index:null===o?w:o}))})),L.addTo(m),m.fire("as:marker-add",P),null!==o)for(var A=function(t){e.markers[t].marker.off("drag"),e.markers[t].marker.on("drag",y(t)),e.markers[t].marker.off("dblclick"),e.markers[t].marker.on("dblclick",(function(n){m.fire("as:marker-remove",g({},e.markers[t],{index:t}))}))},M=o+1;M<this.markers.length;M++)A(M)}}function u(t){var e=t.index,n=void 0===e?null:e,o=function(t,e){if(null==t)return{};var n,a,o={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,["index"]),i=this.getMap(),r={marker:o.marker,point:o.point},s=this.markers;null===n?s.push(r):s.splice(n,0,r);var c=s.length>=3;"draw"===this.phase&&(c?3===s.length&&s.forEach((function(t,e){var n=t.marker,a=n.getIcon();a.options.className=l("area-select-marker",0===e?"start-marker":null),n.setIcon(a)})):s.forEach((function(t){var e=t.marker,n=e.getIcon();n.options.className=l("area-select-marker","invalid"),e.setIcon(n)}))),i.fire("as:update-polygon"),"adjust"===this.phase&&(i.fire("as:update-ghost-points"),this.onPolygonReady()),"draw"===this.phase&&(this.closeLine&&i.removeLayer(this.closeLine),c&&(this.closeLine=new a.Polyline([i.containerPointToLatLng(s[0].point),i.containerPointToLatLng(s[s.length-1].point)],{weight:3,color:"#c0c0c0"}),i.addLayer(this.closeLine)))}function v(t){var e=this,n=t.index,a=void 0===n?0:n,o=this.getMap();if(this.markers.length>3){this.markers.splice(a||0,1)[0].marker.removeFrom(o),o.fire("as:update-polygon"),"adjust"===this.phase&&o.fire("as:update-ghost-points");for(var i=function(t){e.markers[t].marker.off("drag"),e.markers[t].marker.on("drag",b.bind(e)(t)),e.markers[t].marker.off("dblclick"),e.markers[t].marker.on("dblclick",(function(n){o.fire("as:marker-remove",g({},e.markers[t],{index:t}))}))},r=a;r<this.markers.length;r++)i(r)}}function f(){var t=this.getMap(),e=this.markers,n=e.length>=3,o=new a.Polygon(e.map((function(t){return t.marker.getLatLng()})),g({color:n?"rgb(45, 123, 200)":"rgba(220, 53, 69, 0.7)",weight:2},!n&&{dashArray:"5, 10"}));this.polygon&&t.removeLayer(this.polygon),this.polygon=o,t.addLayer(this.polygon)}function k(){var t=this,e=this.getMap();requestAnimationFrame((function(){t.clearGhostMarkers();var n=t.markers,o=t.ghostMarkers;n.forEach((function(i,r){var s=n[r+1]?n[r+1]:n[0],c=i.marker.getLatLng(),h=s.marker.getLatLng(),d=e.latLngToContainerPoint([(c.lat+h.lat)/2,(c.lng+h.lng)/2]),m=new a.DivIcon({className:l("area-select-ghost-marker"),iconSize:[16,16]}),g=new a.Marker(e.containerPointToLatLng(d),{icon:m,draggable:!0}),p={point:d,marker:g};g.on("drag",w.bind(t)(o.length)),g.on("dragstart",P.bind(t)()),g.on("dragend",A.bind(t)(o.length)),o.push(p),g.addTo(e)}))}))}function L(){var t=this.getMap();t.removeLayer(this.closeLine),this.closeLine=null,this.markers[0].marker.getElement().classList.remove("start-marker"),this.setPhase("adjust"),t.fire("as:update-ghost-points"),this.onPolygonReady()}function y(t){if(t.isTrusted){t.preventDefault(),t.target.blur();var e=this.options.active||"adjust"===this.phase;e?this.activateButton.classList.remove("active"):this.activateButton.classList.add("active"),this.setPhase(e?"inactive":"draw",!0)}}function b(t){var e=this,n=this.getMap();return function(a){var o=a.latlng;requestAnimationFrame((function(){var a=n.latLngToContainerPoint(o),i=e.markers[t].point;i.x=a.x,i.y=a.y,n.fire("as:update-polygon"),n.fire("as:update-ghost-points")}))}}function w(t){var e=this,n=this.getMap();return function(o){var i=o.latlng;requestAnimationFrame((function(){var o=e.markers[t],r=e.markers[t+1]?e.markers[t+1]:e.markers[0];e.ghostPolygon&&n.removeLayer(e.ghostPolygon),e.ghostPolygon=new a.Polygon([n.containerPointToLatLng(o.point),i,n.containerPointToLatLng(r.point)],{color:"rgb(45, 123, 200)",weight:2,opacity:.5,fillOpacity:.1,dashArray:"5, 10"}),n.addLayer(e.ghostPolygon),n.fire("as:update-polygon")}))}}function P(){return function(t){t.target.getElement().classList.add("active")}}function A(t){var e=this,n=this.getMap();return function(a){var o=a.target;o.getElement().classList.remove("active"),o.removeFrom(n),e.ghostPolygon&&n.removeLayer(e.ghostPolygon);var i=n.latLngToContainerPoint(o.getLatLng()),r={clientX:i.x,clientY:i.y,index:t+1};n.fire("as:point-add",r)}}var M=a.Control.extend({options:{active:!1,onPolygonReady:function(t){},fadeOnActivation:!0},initialize:function(t){void 0===t&&(t={}),a.Util.setOptions(this,t),this.phase=t.active?"draw":"inactive",this.map_moving=!1,this.markers=[],this.ghostMarkers=[],this.polygon=null,this.closeLine=null,this._mapMoveStart=this.mapMoveStart.bind(this),this._mapMoveEnd=this.mapMoveEnd.bind(this)},onAdd:function(t){return this._container=a.DomUtil.create("div",l("leaflet-area-selector-control")),this.activateButton=a.DomUtil.create("button","",this._container),this.activateButton.addEventListener(h,y.bind(this)),this.activateButton.addEventListener("dblclick",(function(t){t.stopPropagation()})),this.options.active?this.activateButton.classList.add("active"):this.activateButton.classList.remove("active"),a.DomUtil.create("img","",this.activateButton).setAttribute("src",r.a),this._map=t,m(t,this.options),t.on("movestart",this._mapMoveStart),t.on("moveend",this._mapMoveEnd),t.on("as:point-add",p.bind(this)),t.on("as:marker-add",u.bind(this)),t.on("as:marker-remove",v.bind(this)),t.on("as:creation-end",L.bind(this)),t.on("as:update-polygon",f.bind(this)),t.on("as:update-ghost-points",k.bind(this)),this._container},onRemove:function(t){t.on("movestart",this._mapMoveStart),t.on("moveend",this._mapMoveEnd),t.off("as:point-add"),t.off("as:marker-add"),t.off("as:marker-remove"),t.off("as:creation-end"),t.off("as:update-polygon"),t.off("as:update-ghost-points")},getMap:function(){return this._map},onPolygonReady:function(){this.options.onPolygonReady(this.polygon)},setPhase:function(t,e){void 0===e&&(e=!1),this.phase=t,this.options.active="draw"===t,(e||"draw"===this.phase)&&(this.clearGhostMarkers(),this.clearMarkers(),this.clearPolygon());var n=this._map.getPane(d).parentNode;this.options.active?n.classList.remove("inactive"):n.classList.add("inactive")},mapMoveStart:function(){this.map_moving=!0},mapMoveEnd:function(t){var e=this;requestAnimationFrame((function(){e.map_moving=!1}));var n=this._map,o=n.getPane(d).querySelector(".end-selection-area");if(o){var i=this.markers[0].marker,r=o.getBoundingClientRect();c(o,n.latLngToContainerPoint(i.getLatLng()),new a.Point(-r.width/2,-r.height/2))}this.translatePolygon()},translatePolygon:function(){if(0!==this.markers.length){var t=this._map;this.markers.forEach((function(e){e.point=t.latLngToContainerPoint(e.marker.getLatLng())})),this.ghostMarkers.forEach((function(e){e.point=t.latLngToContainerPoint(e.marker.getLatLng())}))}},hoverClosePoint:function(t){this.markers.length>2&&this.closeLine&&this.closeLine.removeFrom(this._map)},outClosePoint:function(t){this.closeLine&&this.closeLine.addTo(this._map)},clearMarkers:function(){var t=this;this.markers.forEach((function(e){e.marker.removeFrom(t._map)})),this.markers=[]},clearGhostMarkers:function(){var t=this;this.ghostMarkers.forEach((function(e){e.marker.removeFrom(t._map)})),this.ghostMarkers=[]},clearPolygon:function(){this.polygon&&this.polygon.removeFrom(this._map),this.polygon=null,this.closeLine&&this.closeLine.removeFrom(this._map),this.closeLine=null}});a.Util.extend(a.Control,{DrawAreaSelection:M,drawAreaSelection:function(t){return void 0===t&&(t={}),new M(t)}});n(6);var E=n(2),B=n.n(E);delete o.a.Icon.Default.prototype._getIconUrl,o.a.Icon.Default.mergeOptions({iconRetinaUrl:n(7),iconUrl:n(8),shadowUrl:n(9)});var x=[41.901493,12.5009157],C=o.a.map("root").setView(x,13);o.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(C);var S=document.createElement("div");S.innerHTML='<div style="text-align: center; font-size: 120%">B-Open</div>\n<img alt="B-Open logo" width="75" src="'.concat(B.a,'" />\n'),o.a.marker(x).addTo(C,{tap:!1}).bindPopup(S);var D=new M({onPolygonReady:function(t){var e=document.getElementById("polygon");e.innerText=JSON.stringify(t.toGeoJSON(2),void 0,2),e.scrollTop=e.scrollHeight},position:"bottomleft"});C.addControl(D)}],[[3,1,2]]]);
//# sourceMappingURL=main.b80df006.chunk.js.map